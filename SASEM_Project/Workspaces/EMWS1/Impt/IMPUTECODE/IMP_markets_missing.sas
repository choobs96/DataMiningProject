*;
* IMPUTE VARIABLE: markets_missing;
*;
format IMP_markets_missing BEST12.0;
label IMP_markets_missing = 'Imputed markets_missing';
IMP_markets_missing = markets_missing;
if missing(IMP_markets_missing) then do;
****************************************************************;
****** DECISION TREE SCORING CODE ******;
****************************************************************;
****** LENGTHS OF NEW CHARACTER VARIABLES ******;
LENGTH I_markets_missing $ 12;
LENGTH _WARN_ $ 4;
****** LABELS FOR NEW VARIABLES ******;
label P_markets_missing0 = 'Predicted: markets_missing=0';
label P_markets_missing1 = 'Predicted: markets_missing=1';
label Q_markets_missing0 = 'Unadjusted P: markets_missing=0';
label Q_markets_missing1 = 'Unadjusted P: markets_missing=1';
label I_markets_missing = 'Into: markets_missing';
label U_markets_missing = 'Unnormalized Into: markets_missing';
label _WARN_ = 'Warnings';
****** TEMPORARY VARIABLES FOR FORMATTED VALUES ******;
LENGTH _ARBFMT_12 $ 12;
DROP _ARBFMT_12;
_ARBFMT_12 = ' ';
/* Initialize to avoid warning. */
****** ASSIGN OBSERVATION TO NODE ******;
DROP _BRANCH_;
_BRANCH_ = -1;
IF NOT MISSING(foreign_gross ) AND
foreign_gross < 138593 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(foreign_gross ) AND
138593 <= foreign_gross THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(total_gross ) THEN DO;
IF total_gross < 184003 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 184003 <= total_gross THEN DO;
_BRANCH_ = 2;
END;
ELSE _BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(tomatometer_count ) THEN DO;
IF tomatometer_count < 50.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 50.5 <= tomatometer_count THEN DO;
_BRANCH_ = 2;
END;
ELSE _BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 2;
IF _BRANCH_ EQ 1 THEN DO;
P_markets_missing0 = 0.06470588235294;
P_markets_missing1 = 0.93529411764705;
Q_markets_missing0 = 0.06470588235294;
Q_markets_missing1 = 0.93529411764705;
I_markets_missing = '1';
U_markets_missing = 1;
END;
ELSE DO;
_BRANCH_ = -1;
IF NOT MISSING(domestic_opening ) AND
domestic_opening < 81 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(domestic_opening ) AND
81 <= domestic_opening THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(domestic_gross ) THEN DO;
IF domestic_gross < 211 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 211 <= domestic_gross THEN DO;
_BRANCH_ = 2;
END;
ELSE _BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(total_gross ) THEN DO;
IF total_gross < 702748 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 702748 <= total_gross THEN DO;
_BRANCH_ = 2;
END;
ELSE _BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 2;
IF _BRANCH_ EQ 1 THEN DO;
_BRANCH_ = -1;
_ARBFMT_12 = PUT( NR , BEST12.);
%DMNORMIP( _ARBFMT_12);
IF _ARBFMT_12 IN ('1' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_12 IN ('0' ) THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(R ) THEN DO;
_ARBFMT_12 = PUT( R , BEST12.);
%DMNORMIP( _ARBFMT_12);
IF _ARBFMT_12 IN ('0' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_12 IN ('1' ) THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(ss_mean ) THEN DO;
IF 0.69397993311036 <= ss_mean THEN DO;
_BRANCH_ = 1;
END;
ELSE IF ss_mean < 0.69397993311036 THEN DO;
_BRANCH_ = 2;
END;
ELSE _BRANCH_ = 1;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
_BRANCH_ = -1;
IF NOT MISSING(foreign_gross ) AND
foreign_gross < 2198691 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(foreign_gross ) AND
2198691 <= foreign_gross THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(total_gross ) THEN DO;
IF total_gross < 2198691 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 2198691 <= total_gross THEN DO;
_BRANCH_ = 2;
END;
ELSE _BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(R ) THEN DO;
_ARBFMT_12 = PUT( R , BEST12.);
%DMNORMIP( _ARBFMT_12);
IF _ARBFMT_12 IN ('1' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_12 IN ('0' ) THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
P_markets_missing0 = 0.75862068965517;
P_markets_missing1 = 0.24137931034482;
Q_markets_missing0 = 0.75862068965517;
Q_markets_missing1 = 0.24137931034482;
I_markets_missing = '0';
U_markets_missing = 0;
END;
ELSE DO;
P_markets_missing0 = 0.31868131868131;
P_markets_missing1 = 0.68131868131868;
Q_markets_missing0 = 0.31868131868131;
Q_markets_missing1 = 0.68131868131868;
I_markets_missing = '1';
U_markets_missing = 1;
END;
END;
ELSE DO;
P_markets_missing0 = 0.20915032679738;
P_markets_missing1 = 0.79084967320261;
Q_markets_missing0 = 0.20915032679738;
Q_markets_missing1 = 0.79084967320261;
I_markets_missing = '1';
U_markets_missing = 1;
END;
END;
ELSE DO;
P_markets_missing0 = 0.92467248908296;
P_markets_missing1 = 0.07532751091703;
Q_markets_missing0 = 0.92467248908296;
Q_markets_missing1 = 0.07532751091703;
I_markets_missing = '0';
U_markets_missing = 0;
END;
END;
****************************************************************;
****** END OF DECISION TREE SCORING CODE ******;
****************************************************************;
*;
* ASSIGN VALUE TO: markets_missing;
*;
length _format200 $200;
drop _format200;
_format200 = strip(I_markets_missing);
if _format200="1" then IMP_markets_missing = 1;
else
if _format200="0" then IMP_markets_missing = 0;
END;
